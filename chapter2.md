# 2 주차 {#2-주차}

#### 2주차 : main 함수, 컴파일, 변수와 상수, 형식, 수식과 연산자, 여러가지 문장, 표준 입출력, Spirits of C

지난 시간에 배운 내용들을 살펴보면,

> 프로그래밍이란?
>
> 프로그래밍 언어 별 특징
>
> 개발 환경 설정
>
> 간단한 프로그램 만들어보기

위와 같습니다.

그 중에서도 C언어로 프로그래밍을 하기위해서는 **컴파일**이라는 과정이 필요했었는데요.

오늘, 저희는 이 과정을 얼추 살펴보고, C언어가 기본적으로 제공하는 다양한 **데이터의 종류**에 대해 알아보려고 합니다.

또, 이러한 **데이터**들을 내 의도대로 계산하여 적절한 결과를 적을 수 있도록 **수식**과 **연산자**에 대해서도 배우게 됩니다.

그러나 무엇보다도 이러한 행위의 최종적인 목표는 **문장**을 이용해 내게 필요한 데이터를 키보드\(혹은 파일의 형태\)로 입력받아 \(내가 아직은 모르나\) 알고싶은 데이터를 모니터\(혹은 파일의 형태\)로 적절히 출력하는 것입니다.

### 여러분들은 저와 함께 약 7주동안 이렇게 C언어의 기본 문법에 대해 배우면서, 언어적 측면에서 컴퓨터 보안이 적용된 부분을 헤집어보며 이들의 설계 의도들을 살펴보는 경험을 하게 될 것입니다.

---

그렇다면 저번 시간에 만든 프로그램을 한번 살펴보도록 하죠.

```
#include <stdio.h>

int main() {
    printf("안녕 세상아!");
    return 0;
}
```

이 프로그램을 실행시켜보면, '안녕 세상아'라는 ~~깜찍한~~ 메시지를 ~~투박하기 그지 없는~~ 까만 '**콘솔**'창에 출력해주었어요.

저희는 이 프로그램 코드를 한 줄 한 줄 읽어나가면서 어떻게 이런 일이 가능했는지 지금부터 확인해보겠습니다.

그럼 맨 첫 한 줄이 의미하는 바는 무엇일까요?

```
#include <stdio.h>
```

뭔가 파이썬에서 '**모듈**'\(**파일**\)을 수입해오는 키워드 '**import**'와 비슷하지 않나요? 잘 유추했어요!

---

## main 함수

그렇다면, 아래의 한 줄이 의미하는 바는 무엇일까요?

```
int main() {
```

일단 main이라는 걸로 봐서 중요한 것 같아보이네요.? 네 맞아요.!

영어로 'main'은 '**같은 종류 중 가장 큰, 주된**'이라는 의미가 있죠?

그런데 C 프로그래밍에서 **main**은 **함수** 중에서 **가장 중요한** 함수입니다.

> ※ 함수?
>
> 함수는 무엇일까요? 적절한 순서로 실행 되는 것\(명령어\)들을 인간 관점에서 묶어 놓은 것입니다.
>
> 왜 묶어 놓았을까요? 아직은 설명할 때가 아니라 스터디 후반부에 알 수 있을거에요.
>
> 어쨌든 **실행되는 것들의 모임**이라고 생각해도 무방해요.

그럼 main 함수는 왜 중요할까요? **프로그램이 실행될 때 이 함수에서 시작**되기 때문이에요.

~~\(물론 항상 그런건 아니지만 일단은 이렇게 알아두세요\)~~

그렇기 때문에 mAiN\(\)이나, 메인\(\)이나, ma!n\(\)이나, MAIN\(\)처럼 함수 이름을 적는다면,

프로그램은 어디서부터 실행할 지 알 수가 없게 돼요.

그래서 프로그램의 실행의 시작점을 딱 'main' 이라고 정해둔 것이에요.

---

## **형식**

앞에 붙은 int는 뭘까요? 여러분들이 생각하는 바로 그 것이에요.

```
int main() {
```

'**int**' 형식, 정수 형식이라는 의미에요. **형식**은 파이썬에서도 중요하지만, C언어에서는 매우 중요해요.

왜냐하면 **함수 이름 앞에 적혀 있는 형식**은 함수가 호출된 후에 값을 호출한 함수로 돌려주는 **값\(return 값\)을 어떻게 읽을 지**를 알려줘요.

이 말을 듣고나서 '이게 뭔 ~~변기 속 고양이 같은~~ 말이냐?'라고 생각할 수 있어요.

그런데 생각해보면 내가 평소에 남들에게 하는 말이 항상 정확하게 동일한 의미로 전달되나요?

> Case 1-1 : "방이 참 깨끗하다!"
>
> \(진짜 방이 깨끗할 때\)
>
> Case 1-2 :"방이 참 깨끗하다?"
>
> \(반어적으로 더러운 방을 꼬집어 말할 때\)
>
> Case 2-1 : "XXX 가족같다!!"
>
> \(가족같은 분위기를 강조할 때\)
>
> Case 2-2 :"XXX가 족같다!!"
>
> \(진짜 foot같을 때\)

~~\(절대로 모 동아리를 깐다거나 그러한 것은 절대로 아닙니다.\)~~

이렇듯 사람이 쓰는 말에도 모호함이 있기 때문에, 컴퓨터처럼 정밀함이 요구되는 기계가 사용하는 값에는 더욱 그 의미를 명확하게 해줄 필요가 있습니다.

> 조금 더 컴퓨터 친화적인 예를 들어보면, 숫자 **17**을 컴퓨터에서 저장할 때,
>
> 8비트\(2진수 8자리\)로 표현하면 **00010001** 으로 나타낼 수 있습니다.
>
> 그런데 이를 4비트\(2진수 4자리\)씩 끊어서 읽는다면,
>
> 0001 0001, 숫자 11을 나타낼 수도 있습니다.
>
> 분명 동일한 값이지만 해석 방법에 따라 다른 의미로 통할 수 있는 것이죠.

\(이에 대한 자세한 내용은 2학년 디지털 논리 시간에 배워요!\)

그래서 **형식**은 컴퓨터에게 '**값을 어떻게 해석할 지**'를 명확히 하는데 필수적인 녀석입니다.

우리는 형식을 잘 다룰수록 원하는 바를 더 정확하게 컴퓨터에게 전달할 수 있을거에요.

---

## 변수와 상수

'값의 형식이 중요하다'를 배웠으니 그럼 어떻게 값과 값의 형식을 이용할 수 있을까요?

만약 프로그래밍을 오로지 값으로만 떡칠한다면 사람이 알아보기가 쉬울까요?

**"그래서 준비했습니다."**

위에서 만든 프로그램 명령의 일부를 기계어 코드\(숫자 값들\)로만 바꾸면,

아래와 같은 숫자 값들로 변환됩니다.

```
...
00D91040
00D91045
00D9104A
00D9104D
00D9104F
...
```

물론 위의 예시는 2진수가 아닌 16진수지만 단지 표현을 16진수로 했을 뿐 숫자라는 사실에는 변함이 없습니다.

행여나

> 이 사실에 의문을 품을 여러분들을 위해 Visual Studio를 켜서 저번에 작업했던 프로젝트를 열고 F10을 눌러봅시다.
>
> \(F10을 누르면 나오는 것은 디버거라고 하는 것입니다. 자세한 것은 나중에 살펴봅시다.\)
>
> ![](/assets/week2/debugger.png)
>
> 그리고 Alt+G\(디스어셈블리\)를 눌러 내가 손수 적은 C 코드가 **숫자 값들의 향연이 **되었는지 두 눈으로 확인해봅시다.
>
> \(Shift + F5를 누르면 디버거가 닫힙니다.\)

이렇듯 직접 숫자 값을 다뤄서 프로그래밍을 할 경우 인간이 이해하기가 정말 어렵습니다.

**그래서 직접 숫자 값을 다루는 대신 우리에게 친숙한 언어로 숫자 값들을 직관적으로 다룰 수 있는 개념을 프로그래밍 언어에서는 변수라고 말합니다.**

우선, 우리가 변수를 사용하기 위해서는 컴파일러에게 **변수 선언**을 해야합니다.

변수 선언을 함으로써 컴파일러는 이 변수가 어떤 **형식**과 **값**으로 \(메모리에서 내가 필요한\) 칸을 초기화 해야할지를 알게 됩니다.

다음과 같은 문법으로 변수를 선언 할 수 있습니다.

```
int num;
```

> 변수 이름 제한 조건  
>  : 변수 이름에는 몇가지 예약어를 제외하면, 알파벳\(대소문자 구분\)과 숫자 그리고 \_\(underscore\)를 이용해 구성할 수 있습니다.
>
> 또 변수 명은 숫자로 시작할 수는 없습니다.
>
> 변수 명의 길이는 ANSI C 표준에 따르면 외부 변수나 매크로는 6자 이내, 내부 변수는 31자 이내로 짓기를 권장하고 있습니다만 ~~옛날은 메모리 부족해서 그런거고~~ 요새는 변수 이름 200자 써도 괜찮아요. ~~물론 변수명 600자 쯤 넘어가면 컴파일러가 파싱을 못해 거부합니다...~~
>
> 가급적 내부 변수 명은 짧고 알아보기 쉬운걸로 적어주세요.
>
> ~~그리고 라이브러리 헤더에 들어있는 이름들 중에서는 \__로 시작하는 것들이 있기에 _\_로 시작하는 것은 가급적 삼가주세요.~~
>
> ~~\(컴파일러에 따라서 변수명에 $\(달러사인\) 같은걸 집어 넣을 수 있다고 합니다. GCC\)~~

```
(변수 형식) (변수 이름);
```

참 쉽죠?

그럼 기본적으로 C언어에서 이용 가능한 형식은 어떤 것들이 있을까요?

| Typename | Description |
| ---: | :--- |
| char | a single byte, capable of holding one character |
| int | an integer, typically reflecting the natural size of integers on the host machine |
| float | single-precision floating point |
| double | double-precision floating point |

char 형은 \(미국인 기준\) 문자 하나를 저장할 수 있는 형식입니다.

> char : Character\(문자\)라는 의미에서 나온 형식 이름입니다.

int 형은 적당한 범위의 정수 하나를 저장할 수 있는 형식입니다.

> int : Integer\(정수\)라는 의미에서 나온 형식 이름입니다.

float 형은 적당한 범위의 부동 소수\(유한 소수\)를 저장할 수 있는 형식입니다.

> float : Floating point Number라는 의미에서 나온 형식 이름입니다.
>
> Floating이라는 말은 소수를 저장하는데 소수점 부분이 이동한다는 말에서 유래했는데요.
>
> 가령, 31.41를 저장하기 위해 지수부분과 가수부분을 분리하여 저장합니다.
>
> $$3.141 × 10² = (지수:2, 가수 : 3.141)$$

double 형은 float형 보다 더 넓은 범위의 부동 소수\(유한 소수\)를 저장할 수 있는 형식입니다.

> double floating point number\(float보다 더 큰 정밀도로 부동소수를 저장할 수 있다.\)

---

**이제 자료형에 맞춰 printf로 변수를 출력하는 법을 알아보자.**

![](https://newrim.gitbooks.io/c-study_icewall/content/assets/자료형.JPG)

```
#include<stdio.h>

int main(void) {
    int num = 10;
    printf("I have %d apples\n",num);
    return 0;
}
```

이런 예제 코드를 실행 하면, 실행 창에 I have 10 apples 라는 문장이 나타난다. 나는 int형 변수 num을 출력할 것이기 때문에 그에 해당하는 %d라는 출력형식을 사용한 것이다.

위의 표에서 double은 %f로 출력할 수 있지만, float보다 자세하게 소숫점을 표현\( 표현 데이터 범위를 더 넓게 \) 하고 싶다면, %lf 를 사용해야 한다.

그리고 long double도 %lf로 출력이 가능하지만, 자세하게 소숫점을 표현\( 표현 데이터 범위를 더 넓게 \) 하고 싶다면, %ld를 사용해야 한다.

###### 

이번에는 내가 변수에 임의로 값을 집어넣는게 아니라,**입력문을 받는 방법에**대해 알아보자.

쓰는 형식은 printf와 크게 다르지 않습니다.

만약 내가 int형 으로 숫자를 입력 받고 싶다면,

```
#include<stdio.h>

int main(void) {
    int age;
    printf("How old are you?\n");
    scanf("%d",&age);
    printf("I'm %d years old.\n",age);
    return 0;
}
```

위와 같은 형식으로 입력을 받을 수 있다.

위 코드를 실행하면,

How old are you?

21

I'm 21 years old.

이런식으로 결과가 나온다.

printf와 크게 다르지 않다. 똑같이 int형 변수 age의 값을 입력받을 것 이기 때문에, %d를 통해 입력을 받는다.

어떤 변수 앞에 &를 붙이면, 해당 변수가 저장되어 있는 메모리\(주소\)에 접근하겠다는 의미이다.

즉 &age이것은 age라는 변수의 주솟값을 의미하는 것이다.

![](https://newrim.gitbooks.io/c-study_icewall/content/assets/연산자.png)

프로그래밍에서의 기본 연산자도 수학에서의 연산자와 크게 다르지 않다.

수학의 연산자와 조금 다른게 있다면

%, ++, - -, = 정도가 있다.

그리고 프로그래밍에서는 +=, /=, %=, \*=과 같은 형태가 존재한다.

+=를 예시로 들어 설명하자면,

a = a+3은 a+=3과 같은 의미이다. 쓰기 번거로운 표현을 줄여 쓰는 것이다.

---

C언어의 철학\(Spirit of C\)

> * Trust the programmer 
>   \(프로그래머는 실수따위 절대 안 함.\)
> * Don't prevent the programmer from doing what needs to be done.  
>   \(자비로움 그 자체 : 우리 애긔\(프로그래머\) 하고 싶은거 다 해. =&gt; 해킹 툴 만드는 것도 가능함.\)
>
> * Keep the language small and simple if you know what you are doing.  
>   \(C로 만들 것이 있다면 코드를 최대한 간결하고, 작게 유지하자. =&gt; 파이썬에 비해 난해한 코드장난이 가능!\)
>
> * Provide only one way to do an operation  
>   \(이 기능은 이 방법 말고는 없도록 만들자.\)
>
> * Make it fast, even if it is not guaranteed to be portable.  
>   \(스마트폰에선 설령 못 쓸 프로그램이 될 지라도, 슈퍼 컴퓨터에선 성능 뽕 제대로 맞아보자.\)

References

The Maximum Length of Variable Names

> [https://msdn.microsoft.com/en-us/library/e7f8y25b.aspx](https://msdn.microsoft.com/en-us/library/e7f8y25b.aspx)
>
> [http://gcc.gnu.org/onlinedocs/cpp/Implementation-limits.html](http://gcc.gnu.org/onlinedocs/cpp/Implementation-limits.html)



